@using Syncfusion.Blazor.Layouts

<div class="n360-card @GetCardCssClass()" dir="@(IsRtl ? "rtl" : "ltr")">
    <SfCard>
        @if (HeaderTemplate != null || !string.IsNullOrEmpty(Title))
        {
            <CardHeader>
                @if (HeaderTemplate != null)
                {
                    @HeaderTemplate
                }
                else
                {
                    <div class="n360-card__header">
                        @if (!string.IsNullOrEmpty(IconCss))
                        {
                            <span class="@IconCss n360-card__icon"></span>
                        }
                        <div class="n360-card__title">@Title</div>
                        @if (!string.IsNullOrEmpty(Subtitle))
                        {
                            <div class="n360-card__subtitle">@Subtitle</div>
                        }
                    </div>
                }
            </CardHeader>
        }
        <CardContent>
            @if (ContentTemplate != null)
            {
                @ContentTemplate
            }
            else
            {
                <div class="n360-card__content">@Content</div>
            }
        </CardContent>
        @if (FooterTemplate != null || ShowActions)
        {
            <CardFooter>
                @if (FooterTemplate != null)
                {
                    @FooterTemplate
                }
                else if (ShowActions && Actions != null)
                {
                    <div class="n360-card__actions">
                        @Actions
                    </div>
                }
            </CardFooter>
        }
    </SfCard>
</div>

@code {
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Subtitle { get; set; }
    [Parameter] public string? Content { get; set; }
    [Parameter] public string? IconCss { get; set; }
    [Parameter] public bool ShowActions { get; set; }
    [Parameter] public RenderFragment? Actions { get; set; }
    [Parameter] public string? CssClass { get; set; }
    [Parameter] public CardVariant Variant { get; set; } = CardVariant.Default;
    [Parameter] public bool IsRtl { get; set; }
    [Parameter] public bool Elevated { get; set; } = true;

    // Templates
    [Parameter] public RenderFragment? HeaderTemplate { get; set; }
    [Parameter] public RenderFragment? ContentTemplate { get; set; }
    [Parameter] public RenderFragment? FooterTemplate { get; set; }

    private string GetCardCssClass()
    {
        var classes = new List<string> { "n360-card" };

        classes.Add($"n360-card--{Variant.ToString().ToLower()}");

        if (Elevated)
        {
            classes.Add("n360-card--elevated");
        }

        if (!string.IsNullOrEmpty(CssClass))
        {
            classes.Add(CssClass);
        }

        if (IsRtl)
        {
            classes.Add("n360-card--rtl");
        }

        return string.Join(" ", classes);
    }

    public enum CardVariant
    {
        Default,
        Primary,
        Success,
        Info,
        Warning,
        Danger
    }
}
