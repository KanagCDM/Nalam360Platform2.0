{
  "//": "========================================",
  "//": "MedWayHealthCare 2.0 - AZURE Configuration",
  "//": "Same Code, Azure Managed Services",
  "//": "Kafka Protocol via Azure Event Hubs",
  "//": "========================================",

  "DeploymentMode": "Azure",
  
  "ConnectionStrings": {
    "DefaultConnection": "Host=medway-db.postgres.database.azure.com;Port=5432;Database=medway;Username=medway_app@medway-db;Password=${AZURE_POSTGRES_PASSWORD};SslMode=Require;Trust Server Certificate=true;Pooling=true;MinPoolSize=5;MaxPoolSize=100;"
  },
  
  "Caching": {
    "Provider": "Redis",
    "Redis": {
      "ConnectionString": "medway-cache.redis.cache.windows.net:6380,password=${AZURE_REDIS_KEY},ssl=true,abortConnect=false",
      "InstanceName": "medway:",
      "DefaultExpirationMinutes": 60,
      "SlidingExpirationMinutes": 30
    }
  },
  
  "Messaging": {
    "Provider": "Kafka",
    "//": "Azure Event Hubs supports Kafka protocol - NO CODE CHANGES",
    "Kafka": {
      "BootstrapServers": "medway-eventhub.servicebus.windows.net:9093",
      "GroupId": "medway-healthcare",
      "SecurityProtocol": "SaslSsl",
      "SaslMechanism": "Plain",
      "SaslUsername": "$ConnectionString",
      "SaslPassword": "${AZURE_EVENTHUB_CONNECTION_STRING}",
      "EnableAutoCommit": false,
      "AutoOffsetReset": "Earliest",
      "EnableIdempotence": true,
      "Topics": {
        "PatientEvents": "medway.patient.events",
        "AppointmentEvents": "medway.appointment.events",
        "ClinicalEvents": "medway.clinical.events",
        "BillingEvents": "medway.billing.events",
        "InventoryEvents": "medway.inventory.events",
        "NotificationEvents": "medway.notification.events"
      }
    }
  },
  
  "MultiTenancy": {
    "Enabled": true,
    "Strategy": "Database",
    "TenantResolution": "Header",
    "TenantHeaderName": "X-Tenant-ID"
  },
  
  "Authentication": {
    "JwtSecret": "${AZURE_JWT_SECRET}",
    "JwtIssuer": "MedWayHealthCare",
    "JwtAudience": "MedWayHealthCareAPI",
    "JwtExpirationMinutes": 60,
    "RefreshTokenExpirationDays": 7,
    "EnableTwoFactorAuthentication": true
  },
  
  "Security": {
    "EnableCors": true,
    "AllowedOrigins": [
      "https://medway-portal.azurewebsites.net",
      "https://medway.healthcare.com"
    ],
    "EnableRateLimiting": true,
    "RateLimitPerMinute": 100,
    "EnableAuditLogging": true
  },
  
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning",
      "System": "Warning"
    },
    "ApplicationInsights": {
      "InstrumentationKey": "${AZURE_APPINSIGHTS_KEY}"
    }
  },
  
  "HealthChecks": {
    "Enabled": true,
    "Endpoints": {
      "Liveness": "/health/live",
      "Readiness": "/health/ready",
      "Detailed": "/health"
    }
  },
  
  "Observability": {
    "ApplicationInsights": {
      "Enabled": true,
      "ConnectionString": "${AZURE_APPINSIGHTS_CONNECTION_STRING}"
    },
    "Prometheus": {
      "Enabled": true,
      "Endpoint": "/metrics"
    }
  },
  
  "Azure": {
    "KeyVault": {
      "Enabled": true,
      "VaultUri": "https://medway-keyvault.vault.azure.net/"
    },
    "ManagedIdentity": {
      "Enabled": true
    }
  }
}
